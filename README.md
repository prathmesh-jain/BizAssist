# AI Business Operations Assistant

A sophisticated, agentic system designed for automated business operations, financial analysis, and document intelligence. This platform leverages a multi-agent orchestration layer to bridge the gap between natural language interaction and structured business data.

## System Architecture

The core of the platform is built on a modular, event-driven architecture that separates intent classification from execution logic.

### Multi-Agent Orchestration
The system utilizes LangGraph to manage complex, stateful workflows. Every user interaction initiates a transition through a directed acyclic graph (DAG):

1. Guardrail Node: Validates the safety and relevance of the input before further processing.
2. Planner Node: Employs a zero-shot classification model to route the request to specialized execution agents.
3. Execution Nodes:
    - Conversation: Handles general business strategy, marketing drafts, and research.
    - Financial Analysis: Directs the Analyst agent to compute trends and insights from structured data.
    - Document Query (RAG): Performs semantic retrieval against uploaded corporate knowledge.
    - Spreadsheet CRUD: Executes precise operations on connected Google Sheets.

### Multimodal Data Pipeline
The platform implements a robust text-extraction service that standardizes various input formats into a uniform data stream for the LLM:
- PDF and DOCX: Full-text extraction with preservation of paragraph structure.
- Images: Integrated OCR pipeline that extracts visible text from charts, invoices, or screenshots using high-detail visual analysis.
- Text: Direct UTF-8 decoding with fallback error handling.

## Core Technical Implementations

### Retrieval-Augmented Generation (RAG)
The document intelligence layer is powered by a hybrid storage approach:
- Vector Database: ChromaDB stores document embeddings generated by the text-embedding-3-small model.
- Chunking Strategy: Uses a RecursiveCharacterTextSplitter with a chunk size of 800 characters and a 100-character overlap to maintain semantic context across boundaries.
- Persistence: Metadata is mirrored in MongoDB to facilitate rapid document management and UI synchronization.

### Intelligent Spreadsheet Integration
Unlike simple API integrations, the Spreadsheet Agent follows a "Grounded Operation" pattern:
- Header Mapping: Before any write operation, the system fetches the current header map to align data points with existing columns, preventing data misalignment.
- Duplicate Prevention: The system computes stable keys for each row (concatenation of unique identifiers) and verifies against existing sheet data before appending new records.
- Sheet Discovery: Automatically discovers available tabs to minimize user input for target selection.

### Frontend State and Streaming
The client is a modern React application optimized for real-time AI interactions:
- Server-Sent Events (SSE): Implements a custom streaming hook to handle high-frequency token updates from the backend agents.
- State Management: Zustand stores manage global chat history, authentication state, and theme preferences with persistent storage.
- Resilience: Integrated unauthorized handlers manage Clerk/Firebase session expiration, ensuring smooth re-authentication flows.

## Technical Stack

### Backend Tier
- Framework: FastAPI (Asynchronous Python)
- AI Layer: LangChain and LangGraph
- Embedding Models: OpenAI text-embedding-3-small
- Primary Database: MongoDB (Motor driver)
- Vector Store: ChromaDB (Local persistent storage)
- Authentication: Firebase Admin SDK

### Frontend Tier
- Framework: React (Vite build system)
- Language: TypeScript (Strict typing enabled)
- Styling: Tailwind CSS
- Visualization: Recharts for financial data representation
- Icons: Lucide React (standard business library)

## Installation and Setup

### Prerequisites
- Python 3.10 or higher
- Node.js 18 or higher (LTS recommended)
- A running MongoDB instance
- OpenAI API credentials

### Backend Configuration
1. Navigate to the `backend` directory.
2. Create and activate a virtual environment.(python -m venv venv)
3. Install required packages:
   ```bash
   pip install -r requirements.txt
   ```
4. Configure the `.env` file with your `OPENAI_API_KEY`, `MONGODB_URL`, and Firebase credentials.
5. Initialize the server:
   ```bash
   uvicorn app.main:app --reload
   ```

### Frontend Configuration
1. Navigate to the `frontend` directory.
2. Install dependencies:
   ```bash
   npm install
   ```
3. Create a `.env` file pointing `VITE_API_URL` to your backend instance.
4. Execute the development build:
   ```bash
   npm run dev
   ```

## Project Structure

- `backend/app/agents`: Definition of the LangGraph topology and specialized agent nodes.
- `backend/app/services`: Core logic for RAG, image processing, and chat orchestration.
- `backend/app/routers`: Asynchronous REST endpoints and SSE streaming controllers.
- `frontend/src/store`: Zustand stores for shared application state.
- `frontend/src/components`: Atomic UI components and layout foundations.

